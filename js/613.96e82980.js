"use strict";(self["webpackChunkvue_shopping"]=self["webpackChunkvue_shopping"]||[]).push([[613],{8557:function(t,e,s){s.d(e,{Z:function(){return l}});s(7658);function i(t){return{all:t=t||new Map,on:function(e,s){var i=t.get(e);i?i.push(s):t.set(e,[s])},off:function(e,s){var i=t.get(e);i&&(s?i.splice(i.indexOf(s)>>>0,1):t.set(e,[]))},emit:function(e,s){var i=t.get(e);i&&i.slice().map((function(t){t(s)})),(i=t.get("*"))&&i.slice().map((function(t){t(e,s)}))}}}const o=i();var l=o},1645:function(t,e,s){var i=s(2492),o=s.n(i);e.Z=o().mixin({toast:!0,showConfirmButton:!1,timer:2500})},8134:function(t,e,s){s.d(e,{Z:function(){return x}});var i=s(3396),o=s(7139);const l={class:"card border mb-4 col-sm-12"},n=["onClick"],c=["src"],a={class:"card-body p-0 p-2"},r={class:"d-flex justify-content-between align-items-center my-2"},d={class:"fw-bold fs-4"},u={class:"badge pill bg-brown"},p={class:"d-flex justify-content-between align-items-center"},w={class:"fs-5 text-danger fw-bold"},f={class:"text-muted"};function h(t,e,s,h,g,_){const m=(0,i.up)("swiper-slide"),b=(0,i.up)("swiper");return(0,i.wg)(),(0,i.j4)(b,{class:"mt-5",style:{"--swiper-navigation-color":"brown","--swiper-pagination-color":"brown"},modules:g.modules,navigation:!0,autoplay:{delay:2500,disableOnInteraction:!1},breakpoints:{576:{slidesPerView:1,spaceBetween:10},768:{slidesPerView:2,spaceBetween:10},1024:{slidesPerView:3,spaceBetween:10}}},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(g.products,(e=>((0,i.wg)(),(0,i.j4)(m,null,{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i._)("div",l,[(0,i._)("div",{onClick:t=>_.getDetail(e.id)},[(0,i._)("img",{src:e.imageUrl,class:"card-img-top object-fit"},null,8,c)],8,n),(0,i._)("div",a,[(0,i._)("div",r,[(0,i._)("span",d,(0,o.zw)(e.title),1),(0,i._)("span",u,(0,o.zw)(e.category),1)]),(0,i._)("div",p,[(0,i._)("span",w,"特價 NT$"+(0,o.zw)(t.$filters.currency(e.price)),1),(0,i._)("span",f,[(0,i._)("del",null,"原價NT$"+(0,o.zw)(t.$filters.currency(e.origin_price)),1)])])])])])])),_:2},1024)))),256))])),_:1},8,["modules"])}s(7658);var g=s(8040),_=s(9477),m={components:{Swiper:g.tq,SwiperSlide:g.o5},emits:["update"],data(){return{modules:[_.tl,_.pt,_.W_],products:[]}},methods:{getProducts(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/coffee-api/products/all";this.$http.get(t).then((t=>{this.products=t.data.products}))},getDetail(t){this.$router.push(`/product/${t}`),this.$emit("update")}},mounted(){this.getProducts()}},b=s(89);const v=(0,b.Z)(m,[["render",h],["__scopeId","data-v-0ba1c8dc"]]);var x=v},613:function(t,e,s){s.r(e),s.d(e,{default:function(){return z}});var i=s(3396),o=s(7139),l=s(9242);const n={class:"container"},c={key:0},a=(0,i._)("h3",{class:"mt-5"},"收藏商品",-1),r={class:"table-responsive my-5 fs-5"},d={class:"table text-center border align-middle"},u=(0,i._)("thead",{class:"table-tan"},[(0,i._)("tr",null,[(0,i._)("th",{class:"text-white"},"品名"),(0,i._)("th",{class:"text-white"},"分類"),(0,i._)("th",{class:"text-white"},"價格"),(0,i._)("th",{class:"text-white"},"購物車"),(0,i._)("th",{class:"text-white"},"取消")])],-1),p=["src"],w={class:"fw-bold"},f=["onClick"],h=(0,i._)("i",{class:"bi bi-cart-fill"},null,-1),g=["onClick"],_=(0,i._)("i",{class:"bi bi-x-lg"},null,-1),m=[_],b={key:1,class:"container"},v={class:"row mt-5"},x={class:"col-md-8 border p-5 rounded bg-brown text-white text-center mx-auto"},y=(0,i._)("h1",null,"收藏為空",-1),k={class:"row mt-5"},P=(0,i._)("div",{class:"text-center my-3"},[(0,i._)("span",{class:"fs-1 fw-bold text-white bg-brown opacity-75 px-5"},"熱銷商品")],-1),$={class:"container-fluid"};function C(t,e,s,_,C,L){const S=(0,i.up)("loading"),Z=(0,i.up)("router-link"),D=(0,i.up)("AllProduct");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(S,{active:C.isLoading},null,8,["active"]),(0,i._)("div",n,[C.followProduct.length>0?((0,i.wg)(),(0,i.iD)("div",c,[a,(0,i._)("div",r,[(0,i._)("table",d,[u,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(C.followProduct,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id},[(0,i._)("td",null,[(0,i.Wm)(Z,{to:`/product/${t.id}`,style:{color:"black","text-decoration":"none"}},{default:(0,i.w5)((()=>[(0,i._)("img",{src:t.imageUrl,class:"object-fit",style:{height:"120px"}},null,8,p),(0,i._)("p",w,(0,o.zw)(t.title),1)])),_:2},1032,["to"])]),(0,i._)("td",null,(0,o.zw)(t.category),1),(0,i._)("td",null,(0,o.zw)(t.price),1),(0,i._)("td",null,[(0,i._)("button",{type:"button",class:"btn btn-outline-danger fs-5",onClick:(0,l.iM)((e=>L.addCart(t.id)),["prevent"])},[h,(0,i.Uk)(" 加入購物車 ")],8,f)]),(0,i._)("td",null,[(0,i._)("button",{href:"#",class:"btn btn-outline-secondary",onClick:(0,l.iM)((e=>L.delFollowed(t.id)),["prevent"])},m,8,g)])])))),128))])])])])):((0,i.wg)(),(0,i.iD)("div",b,[(0,i._)("div",v,[(0,i._)("div",x,[y,(0,i.Wm)(Z,{to:"/products",class:"btn btn-brown border btn-md-lg w-100 mt-5"},{default:(0,i.w5)((()=>[(0,i.Uk)(" 繼續購物 ")])),_:1})]),(0,i._)("div",k,[P,(0,i._)("div",$,[(0,i.Wm)(D)])])])]))])])}s(7658);var L=s(1645),S=s(8557),Z=s(8134),D={components:{AllProduct:Z.Z},data(){return{products:{},carts:{},followProduct:{},followed:JSON.parse(localStorage.getItem("followList"))||[],isLoading:!1,id:[]}},inject:["emitter","$httpMessageState"],created(){this.getProducts()},methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/coffee-api/products";this.isLoading=!0,this.$http.get(t).then((t=>{this.products=t.data.products,this.getFollow(),this.isLoading=!1})).catch((()=>{this.isLoading=!1}))},getFollow(){this.followProduct=this.products.filter((t=>this.followed.indexOf(t.id)>-1))},addCart(t){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/coffee-api/cart",s={product_id:t,qty:1};this.$http.post(e,{data:s}).then((t=>{this.isLoading=!1,this.message=t.data.message,L.Z.fire({icon:"success",title:this.message}),S.Z.emit("get-cart")}))},editfollow(t){const e=this.followed.indexOf(t);-1===e?this.followed.push(t):this.followed.splice(e,1),localStorage.setItem("followList",JSON.stringify(this.followed))},delFollowed(t){const e=this.followed.indexOf(t);-1!==e&&(this.followed.splice(e,1),L.Z.fire({icon:"error",title:"取消收藏"}),this.getFollow()),localStorage.setItem("followList",JSON.stringify(this.followed))}},created(){this.getProducts()}},O=s(89);const j=(0,O.Z)(D,[["render",C]]);var z=j}}]);
//# sourceMappingURL=613.96e82980.js.map