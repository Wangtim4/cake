"use strict";(self["webpackChunkvue_shopping"]=self["webpackChunkvue_shopping"]||[]).push([[534],{1645:function(e,a,s){var l=s(2492),t=s.n(l);a.Z=t().mixin({toast:!0,showConfirmButton:!1,timer:2500})},5534:function(e,a,s){s.r(a),s.d(a,{default:function(){return se}});var l=s(3396),t=s(7139),r=s(9242);const o={class:"bg-light pt-5 pb-7"},d={class:"container"},i={class:"row justify-content-center flex-md-row flex-column-reverse"},c={class:"col-md-6"},n={class:"bg-white mb-5 shadow-lg"},m=(0,l._)("div",{class:"bg-tan text-white text-center"},[(0,l._)("h4",{class:"fw-bold p-2"},"填寫資料")],-1),u={class:"mb-3"},f=(0,l._)("label",{for:"email",class:"form-label"},[(0,l._)("span",{class:"text-danger"},"＊"),(0,l.Uk)("Email")],-1),p={class:"mb-3"},b=(0,l._)("label",{for:"name",class:"form-label"},[(0,l._)("span",{class:"text-danger"},"＊"),(0,l.Uk)("收件人姓名")],-1),_={class:"mb-3"},h=(0,l._)("label",{for:"tel",class:"form-label"},[(0,l._)("span",{class:"text-danger"},"＊"),(0,l.Uk)("收件人電話")],-1),v={class:"mb-3"},g=(0,l._)("label",{for:"address",class:"form-label"},[(0,l._)("span",{class:"text-danger"},"＊"),(0,l.Uk)("收件人地址")],-1),w={class:"mb-3"},x=(0,l._)("label",{for:"payment",class:"form-label"},[(0,l._)("span",{class:"text-danger"},"＊"),(0,l.Uk)("付款方式")],-1),y=(0,l._)("option",{value:""},"請選擇付款方式",-1),k=(0,l._)("option",{value:"信用卡付款"},"信用卡付款",-1),V=(0,l._)("option",{value:"ATM 轉帳"},"ATM 轉帳",-1),W=(0,l._)("option",{value:"超商取貨付款"},"超商取貨付款",-1),$={class:"mb-3"},U=(0,l._)("label",{for:"message",class:"form-label"},"留言",-1),C={class:"d-flex justify-content-between"},T=(0,l._)("button",{class:"btn btn-outline-brown"},"送出訂單",-1),z={class:"col-md-6"},j={class:"border-0 shadow-lg mb-4 bg-white"},q=(0,l._)("div",{class:"bg-tan text-white text-center"},[(0,l._)("h4",{class:"mb-4 fw-bold p-2"},"購物清單")],-1),L={class:"d-flex mx-2"},N=["src"],I={class:"w-100"},M={class:"d-flex justify-content-between fw-bold"},A={class:"mb-0"},D={class:"mb-0"},E={class:"d-flex justify-content-between"},Z={class:"text-muted mb-0"},F={class:"mb-0"},H={class:"table mt-4 border-top border-0 text-muted"},O={class:"p-2"},S=(0,l._)("th",{class:"border-0 pt-4"},"總計",-1),Y={class:"text-end border-0 pt-4"},B=(0,l._)("th",{class:"border-0 text-danger"},"折扣價格",-1),K={class:"text-end border-0 text-danger"},G={class:"d-flex justify-content-between p-2 bg-tan text-white"},J=(0,l._)("p",{class:"h4 fw-bold"},"總金額",-1),P={class:"h4 fw-bold"};function Q(e,a,s,Q,R,X){const ee=(0,l.up)("loading"),ae=(0,l.up)("Field"),se=(0,l.up)("ErrorMessage"),le=(0,l.up)("router-link"),te=(0,l.up)("Form");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(ee,{active:R.isLoading},null,8,["active"]),(0,l._)("div",o,[(0,l._)("div",d,[(0,l._)("div",i,[(0,l._)("div",c,[(0,l._)("div",n,[m,(0,l.Wm)(te,{onSubmit:X.createOrder,class:"p-2"},{default:(0,l.w5)((({errors:e})=>[(0,l._)("div",u,[f,(0,l.Wm)(ae,{id:"email",name:"email",type:"email",class:(0,t.C_)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:R.form.user.email,"onUpdate:modelValue":a[0]||(a[0]=e=>R.form.user.email=e)},null,8,["class","modelValue"]),(0,l.Wm)(se,{name:"email",class:"invalid-feedback"})]),(0,l._)("div",p,[b,(0,l.Wm)(ae,{id:"name",name:"姓名",type:"text",class:(0,t.C_)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:R.form.user.name,"onUpdate:modelValue":a[1]||(a[1]=e=>R.form.user.name=e)},null,8,["class","modelValue"]),(0,l.Wm)(se,{name:"姓名",class:"invalid-feedback"})]),(0,l._)("div",_,[h,(0,l.Wm)(ae,{id:"tel",name:"電話",type:"tel",class:(0,t.C_)(["form-control",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",rules:"required",modelValue:R.form.user.tel,"onUpdate:modelValue":a[2]||(a[2]=e=>R.form.user.tel=e)},null,8,["class","modelValue"]),(0,l.Wm)(se,{name:"電話",class:"invalid-feedback"})]),(0,l._)("div",v,[g,(0,l.Wm)(ae,{id:"address",name:"地址",type:"text",class:(0,t.C_)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:R.form.user.address,"onUpdate:modelValue":a[3]||(a[3]=e=>R.form.user.address=e)},null,8,["class","modelValue"]),(0,l.Wm)(se,{name:"地址",class:"invalid-feedback"})]),(0,l._)("div",w,[x,(0,l.Wm)(ae,{class:(0,t.C_)(["form-select mb-3",{"is-invalid":e["付款方式"]}]),id:"payment",name:"付款方式",rules:"required",as:"select",modelValue:R.form.user.payment,"onUpdate:modelValue":a[4]||(a[4]=e=>R.form.user.payment=e)},{default:(0,l.w5)((()=>[y,k,V,W])),_:2},1032,["class","modelValue"]),(0,l.Wm)(se,{name:"付款方式",class:"invalid-feedback"})]),(0,l._)("div",$,[U,(0,l.wy)((0,l._)("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"5","onUpdate:modelValue":a[5]||(a[5]=e=>R.form.message=e)},null,512),[[r.nr,R.form.message]])]),(0,l._)("div",C,[(0,l.Wm)(le,{to:"/cart",class:"btn btn-outline-secondary"},{default:(0,l.w5)((()=>[(0,l.Uk)(" 上一步 ")])),_:1}),T])])),_:1},8,["onSubmit"])])]),(0,l._)("div",z,[(0,l._)("div",j,[q,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(R.carts,(a=>((0,l.wg)(),(0,l.iD)("div",L,[(0,l._)("img",{src:a.product.imageUrl,alt:"",class:"me-2",style:{width:"48px",height:"48px","object-fit":"cover"}},null,8,N),(0,l._)("div",I,[(0,l._)("div",M,[(0,l._)("p",A,(0,t.zw)(a.product.title),1),(0,l._)("p",D,"x "+(0,t.zw)(a.qty),1)]),(0,l._)("div",E,[(0,l._)("p",Z,[(0,l._)("small",null,"NT$ "+(0,t.zw)(e.$filters.currency(a.product.price)),1)]),(0,l._)("p",F,"NT$"+(0,t.zw)(e.$filters.currency(a.total)),1)])])])))),256)),(0,l._)("table",H,[(0,l._)("tbody",O,[(0,l._)("tr",null,[S,(0,l._)("td",Y," NT$"+(0,t.zw)(e.$filters.currency(R.cart.total)),1)]),(0,l._)("tr",null,[B,(0,l._)("td",K," NT$"+(0,t.zw)(e.$filters.currency(R.cart.total-R.cart.final_total)),1)])])]),(0,l._)("div",G,[J,(0,l._)("p",P," NT$"+(0,t.zw)(e.$filters.currency(R.cart.final_total)),1)])])])])])])],64)}s(7658);var R=s(1645),X={data(){return{cart:{},carts:[],isLoading:!1,form:{user:{name:"",email:"",tel:"",address:"",payment:"WebATM"},message:""},orderId:""}},methods:{getCart(){const e="https://vue3-course-api.hexschool.io/api/coffee-api/cart";this.isLoading=!0,this.$http.get(e).then((e=>{this.cart=e.data.data,this.carts=e.data.data.carts,this.isLoading=!1}))},createOrder(){const e="https://vue3-course-api.hexschool.io/api/coffee-api/order",a=this.form;this.isLoading=!0,this.$http.post(e,{data:a}).then((e=>{console.log(e),this.orderId=e.data.orderId,R.Z.fire({icon:"success",title:"訂單送出"}),this.isLoading=!1,this.$router.push(`/checkout/${this.orderId}`)}))}},created(){this.getCart()}},ee=s(89);const ae=(0,ee.Z)(X,[["render",Q]]);var se=ae}}]);
//# sourceMappingURL=534.9226d7c5.js.map