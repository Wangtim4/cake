"use strict";(self["webpackChunkvue_shopping"]=self["webpackChunkvue_shopping"]||[]).push([[743],{8557:function(t,e,i){i.d(e,{Z:function(){return o}});i(7658);function s(t){return{all:t=t||new Map,on:function(e,i){var s=t.get(e);s?s.push(i):t.set(e,[i])},off:function(e,i){var s=t.get(e);s&&(i?s.splice(s.indexOf(i)>>>0,1):t.set(e,[]))},emit:function(e,i){var s=t.get(e);s&&s.slice().map((function(t){t(i)})),(s=t.get("*"))&&s.slice().map((function(t){t(e,i)}))}}}const a=s();var o=a},1645:function(t,e,i){var s=i(2492),a=i.n(s);e.Z=a().mixin({toast:!0,showConfirmButton:!1,timer:2500})},2:function(t,e,i){i.d(e,{Z:function(){return b}});var s=i(3396),a=i(7139),o=i(9242);const n={"aria-label":"Page "},l={class:"pagination justify-content-center"},r=(0,s._)("span",{"aria-hidden":"true"},"«",-1),c=[r],d=["onClick"],g=(0,s._)("span",{"aria-hidden":"true"},"»",-1),u=[g];function p(t,e,i,r,g,p){return(0,s.wg)(),(0,s.iD)("nav",n,[(0,s._)("ul",l,[(0,s._)("li",{class:(0,a.C_)(["page-item",{disabled:1===i.pages.current_page}])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=(0,o.iM)((t=>p.updatePage(i.pages.current_page-1)),["prevent"]))},c)],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.pages.total_pages,(t=>((0,s.wg)(),(0,s.iD)("li",{class:(0,a.C_)(["page-item",{active:t===i.pages.current_page}]),key:t},[(0,s._)("a",{class:"page-link",href:"#",onClick:(0,o.iM)((e=>p.updatePage(t)),["prevent"])},(0,a.zw)(t),9,d)],2)))),128)),(0,s._)("li",{class:(0,a.C_)(["page-item",{disabled:i.pages.current_page===i.pages.total_pages}])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[1]||(e[1]=(0,o.iM)((t=>p.updatePage(i.pages.current_page+1)),["prevent"]))},u)],2)])])}var f={props:["pages"],methods:{updatePage(t){this.$emit("emit-pages",t)}}},h=i(89);const m=(0,h.Z)(f,[["render",p]]);var b=m},4743:function(t,e,i){i.r(e),i.d(e,{default:function(){return q}});i(7658);var s=i(3396),a=i(7139),o=i(9242);const n=t=>((0,s.dD)("data-v-574ca512"),t=t(),(0,s.Cn)(),t),l={class:"container-fluid mt-md-5 mb-7"},r={class:"row"},c={class:"col-md-2 col-sm-12 mb-3 mt-sm-2"},d={class:"list-group"},g=["onClick"],u={class:"col-md-10 col-sm-12"},p={class:"row"},f={class:"col-md-6 col-lg-4"},h={class:"card border mb-4 position-relative"},m=["onClick"],b=["src"],_=["onClick"],w={key:0,class:"bi bi-heart-fill text-secondary position-absolute",style:{top:"16px",right:"16px"}},v={key:1,class:"bi bi-heart-fill text-danger position-absolute",style:{top:"16px",right:"16px"}},C={class:"card-body p-0 p-2"},y={class:"d-flex justify-content-between align-items-center my-2"},k={class:"fw-bold fs-4"},x={class:"badge pill bg-brown"},P={class:"d-flex justify-content-between align-items-center"},$={class:"fs-5 text-danger fw-bold"},D={class:"text-muted"},Z={class:"d-flex justify-content-between"},L=["disabled","onClick"],I={key:0,class:"spinner-border spinner-border-sm text-success",role:"status"},j=n((()=>(0,s._)("i",{class:"bi bi-cart-fill"},null,-1))),z=["onClick"],M=n((()=>(0,s._)("i",{class:"bi bi-book-fill"},null,-1)));function N(t,e,i,n,N,O){const S=(0,s.up)("loading"),H=(0,s.up)("Pagination");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(S,{active:N.isLoading},null,8,["active"]),(0,s._)("div",null,[(0,s._)("div",l,[(0,s._)("div",r,[(0,s._)("div",c,[(0,s._)("ul",d,[(0,s._)("button",{type:"button",class:(0,a.C_)(["btn btn-outline-brown rounded-4 mb-2",{active:""===N.filterCategory}]),onClick:e[0]||(e[0]=t=>N.filterCategory="")}," 全部商品 ",2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(N.categories,(t=>((0,s.wg)(),(0,s.iD)("button",{type:"button",class:(0,a.C_)(["btn btn-outline-brown rounded-4 mb-2",{active:t===N.filterCategory}]),onClick:e=>N.filterCategory=t,key:t},(0,a.zw)(t),11,g)))),128))])]),(0,s._)("div",u,[(0,s._)("div",p,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(O.filterCategories,(e=>((0,s.wg)(),(0,s.iD)("div",f,[(0,s._)("div",h,[(0,s._)("div",{onClick:i=>t.$router.push(`/product/${e.id}`)},[(0,s._)("img",{src:e.imageUrl,class:"card-img-top object-fit img-hover",style:{height:"300px"}},null,8,b)],8,m),(0,s._)("div",{class:"fs-3",onClick:(0,o.iM)((t=>O.editfollow(e.id)),["prevent"])},[-1===N.followed.indexOf(e.id)?((0,s.wg)(),(0,s.iD)("i",w)):((0,s.wg)(),(0,s.iD)("i",v))],8,_),(0,s._)("div",C,[(0,s._)("div",y,[(0,s._)("span",k,(0,a.zw)(e.title),1),(0,s._)("span",x,(0,a.zw)(e.category),1)]),(0,s._)("div",P,[(0,s._)("span",$,"特價 NT$"+(0,a.zw)(t.$filters.currency(e.price)),1),(0,s._)("span",D,[(0,s._)("del",null,"原價NT$"+(0,a.zw)(t.$filters.currency(e.origin_price)),1)])])]),(0,s._)("div",Z,[(0,s._)("button",{type:"button",disabled:this.status.loadingItem===e.id,class:"btn btn-outline-success w-50",onClick:t=>O.addCart(e.id)},[e.id===this.status.loadingItem?((0,s.wg)(),(0,s.iD)("i",I)):(0,s.kq)("",!0),j,(0,s.Uk)(" 加入購物 ")],8,L),(0,s._)("button",{type:"button",class:"btn btn-outline-danger w-50",onClick:t=>O.getProduct(e.id)},[M,(0,s.Uk)(" 商品介紹 ")],8,z)])])])))),256))])])])])]),(0,s.Wm)(H,{pages:N.pagination,onEmitPages:O.getProducts},null,8,["pages","onEmitPages"])],64)}var O=i(1645),S=i(8557),H=i(2),Y={components:{Pagination:H.Z},data(){return{products:{},pagination:{},status:{loadingItem:""},isLoading:!1,message:[],categories:["生乳捲","蛋糕","周邊商品"],filterCategory:"",followed:JSON.parse(localStorage.getItem("followList"))||[]}},computed:{filterCategories(){return this.filterCategory?this.products.filter((t=>{const e=t.category.toLowerCase().includes(this.filterCategory.toLowerCase());return e})):this.products}},inject:["emitter","$httpMessageState"],methods:{getProducts(t=1){this.isLoading=!0;const e=`https://vue3-course-api.hexschool.io/api/coffee-api/products?page=${t}`;console.log(e),this.$http.get(e).then((t=>{console.log(t),this.isLoading=!1,this.products=t.data.products,this.pagination=t.data.pagination,S.Z.emit("get-cart");const{categoryName:e}=this.$route.params;e&&(this.filterCategory=e)}))},getProduct(t){this.$router.push(`/product/${t}`)},addCart(t){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/coffee-api/cart";this.loadingItem=t;const i={product_id:t,qty:1};this.$http.post(e,{data:i}).then((t=>{this.isLoading=!1,this.loadingItem="",this.message=t.data.message,console.log(this.message),O.Z.fire({icon:"success",title:this.message}),S.Z.emit("get-cart")}))},editfollow(t){const e=this.followed.indexOf(t);-1===e?(this.followed.push(t),O.Z.fire({icon:"success",title:"收藏成功"})):(this.followed.splice(e,1),O.Z.fire({icon:"error",title:"取消收藏"})),localStorage.setItem("followList",JSON.stringify(this.followed))}},created(){this.getProducts()}},K=i(89);const U=(0,K.Z)(Y,[["render",N],["__scopeId","data-v-574ca512"]]);var q=U}}]);
//# sourceMappingURL=743.717c74e7.js.map